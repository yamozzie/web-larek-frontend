# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Паттерн проектирования

В данном проекте используется паттерн MVP (Model-View-Presenter)

## Типы данных

### Интерфейсы

Интерфейс **IProduct**
Интерфейс, хранящий данные о продуктах c сервера

Интерфейс **IOrder**
Содержит поля для составления заказа

Интерфейс **IOrderForm**
Содержит информацию о заказе, включая метод оплаты, контактные данные, адрес, итоговую сумму и список товаров


Интерфейс **IOrderResult**
Интерфейс результата заказа

Интерфейс **FormErrors**
Тип ошибок формы


### Модели данных (Model)

#### ApiModel

Класс **ApiModel** предназначен для работы с сервером и взаимодействиея с API

Атрибуты:
- cdn — базовый URL для изображений.
- items — массив продуктов типа IProduct.

Методы:
- getListCard(): Promise<IProduct[]> — получение списка продуктов.
- postOrderLot(order: IOrderForm): Promise<IOrderResult> — отправка заказа на сервер.

#### BasketModel
 
Класс **BasketModel** обеспечивает работу корзины. Наследует интерфейс IBasketModel. Его функция управление данными корзины, добавление и удаление товаров.

Атрибут:
- _items: массив объектов IProduct, содержащий товары в корзине.

Методы:
- add(data: IProduct): добавляет товар в корзину.
- delete(data: IProduct): удаляет товар из корзины по id.
- sum() — возвращает общую сумму товаров в корзине.
- set items(data: IProduct[]): задает новый массив товаров.

#### CatalogModel

Класс **CatalogModel** обеспечивает работу каталога товаров сайта. Наследует интерфейс ICatalogModel. Его задаача управление данными каталога, получение товаров из сервера.

Атрибут:
- _items: массив объектов IProduct, содержащий товары каталога.
selectedCard — выбранный продукт для предпросмотра.

Методы:
- setItems(items: IProduct[]): задает массив продуктов для каталога.
- getProduct(id: string): возвращает объект продукта по id.
- setPreview(item: IProduct) — устанавливает продукт для предпросмотра.

#### FormModel

Класс **FormModel** отвечает за хранение данных формы и их обработку

Атрибуты:
- payment: Способ оплаты.
- address: Адрес доставки.
- email: Электронная почта.
- phone: Телефон.
- total: Общая сумма заказа.
- items: Массив товаров в заказе.
- formErrors: Объект с ошибками формы.

Методы:
- setOrderAddress(field: string, value: string): Устанавливает адрес заказа по полю.
- setOrderData(field: string, value: string): Устанавливает данные заказа (email и телефон).
- orderValidate() — валидация данных заказа.
- contactsValidate() — валидация контактных данных.
- getOrder(): Возвращает объект с текущими данными заказа.

### Модели представления (View)

#### BasketView

Класс **BasketView** обеспечивает отображение корзины. Его задача отображать предметы, добавленные в корзину

Атрибут:
- container: элемент HTML, который рендерит корзину.

Метод:
- renderHeaderBasketCounter(value: number) — обновляет счетчик товаров в корзине.
- renderSumAllProducts(sum: number) — отображает общую сумму товаров.
- render(data: { items: HTMLElement[] }): рендер корзины.

#### BasketItemView

Класс **BasketItemView** работает вместе с BasketView, его задача рендерить товары в корзине

Атрибуты:
- container: элемент шаблона HTML для товара в корзине.
- title: название товара
- addButton, deleteButton: элементы управления внутри корзины.
- id: идентификатор товара.

Методы:
- render(data: { id: string, title: string }): отображает данные о товаре.

#### catalogItemView

Класс **catalogItemView** обеспечивает ранедер предметов каталога. Его задача подставлять товары под шаблон, работает вместе с классом catalogView

Атрибуты:
- container: элемент шаблона HTML для одного товара в каталоге.
- title, image, category, price: элементы управления для отображения товара.
- id: идентификатор товара.

Метод:
- render(data: IProduct): отображает данные о товаре.

#### catalogView

Класс **catalogView** рендерит весь каталог со всеми товарами.

Атрибут:
- container: элемент шаблона HTML, который рендерит каталог товаров.

Метод:
- render(data: { items: HTMLElement[] }): добавляет товары в каталог.

#### Modal

Класс **Modal** отвечает за отображение модального окна и управлением его состояния.

Атрибуты:
- modalContainer: HTML элемент контейнера модального окна.
- closeButton: Кнопка закрытия модального окна.
- modalContent: Контейнер для контента модального окна.
- events: Объект для управления событиями.

Методы:
- open(): Открывает модальное окно и генерирует событие modal:open.
- close(): Закрывает модальное окно и генерирует событие modal:close.
- render(): Рендерит контент модального окна и возвращает контейнер.

#### ModalSuccess

Класс **ModalSuccess** отвечает за отображение модального окна для успешного заказа.

Атрибуты:
- success: Элемент с сообщением об успешном заказе.
- description: Описание успешного завершения.
- button: Кнопка закрытия.

Метод:
- render(total: number): Рендерит окно успеха.

#### Order

Класс **Order** отвечает за отображение формы заказа и выбора способа оплаты

Атрибуты:
- formOrder: HTML форма для заказа.
- buttonAll: Массив кнопок выбора оплаты.
- paymentSelection: Текущий выбранный способ оплаты.
- formErrors: Контейнер для ошибок.

Методы:
- render(): Рендерит форму заказа.
- set paymentSelection(paymentMethod: string): Устанавливает выбранный способ оплаты.
- set valid(value: boolean): Устанавливает состояние кнопки отправки в зависимости от валидности формы.

#### Contacts

Класс **Contacts** отвечает за отображение формы для заполнения контактов.

Атрибуты:
- formContacts: HTML форма для контактов.
- inputAll: Массив инпутов формы.
- buttonSubmit: Кнопка отправки формы.
- formErrors: Контейнер для ошибок.

Метод:
- set valid(value: boolean): Устанавливает состояние кнопки отправки в зависимости от валидности формы.
- render(): Рендерит форму контактов.

### Связующая модель (Presenter)

Презентер не выявлен в явный класс, однако взаимодействие между слоями модели и представления осуществляется через события и вызовы методов. Например, в BasketItemView и CatalogItemView через объект событий events происходит связь между Моделями представления (View) и Моделями данных (Model).